# Miscelaneous reverse-engineering scripts

This repository contains scripts that I use to figure stuff out while mainlining.

## Register dumping

* `libdump` - Python library for parsing reg/val dumps in the [dump format)(#dump-format)
* `tools/devmem-read-block.sh` - Bash script to automate dumping an entire MMIO block with `devmem2`.
* `tools/i2c-read-block.sh` - Bash script to automate dumping all bytes from an I2C device with `i2cget`; requires `i2c-tools`.
* `generate-dump-diff.py` - Python script, creates a HTML diff of two register dumps. Requires `jinja2`.
* `split-dumpall-dumps.py` - Script to split up individual dumps from a mass-dump file generated by the script generated by `libdump.ext.doc_bcm_kona.gen_dump_commands`

### Dump format

The dump files are text files with key/value pairs and unix-style line breaks (`\n`).

The file starts with a header:

```
fmt dump
type mmio
base_addr 0x0000f000
size 0x...
addr_bits 32
val_bits 8
--- header_end ---
```

* `fmt`: must be set to `dump`.
* `type`: one of `mmio`, `i2c`, `unknown`
* `base_addr`: base address of the block as a hex number
* `size`: size of the block (i.e. the last address, inclusive); either hex or decimal number
* `addr_bits`: amount of bits in address
* `val_bits`: amount of bits in values

Below the header are reg/value pairs, with the reg and value both being hex numbers. The reg starts at the `base_addr`.

```
0x0000f000 0x01
0x0000f004 0x02
```

If a value is unreadable, it is set to `-`:

```
0x0000f020 -
```
